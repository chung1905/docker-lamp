<VirtualHost *:80>
    # Ex: ServerName public.example.php71
    #     DocumentRoot /var/www/html/example/public
    ServerAlias *.php
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    ###
    # %1 is first group captured by RewriteCond (matched against %{HTTP_HOST} eg: "public.example.php71")
    # $1 is first group captured by RewriteRule (matched against eg: "/app1/index.html")
    # Reference: https://httpd.apache.org/docs/2.4/mod/mod_rewrite.html
    ###
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php82
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php82$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php82:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php81
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php81$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php81:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php80
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php80$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php80:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php74
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php74$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php74:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php73
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php73$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php73:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php72
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php72$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php72:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php71
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php71$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php71:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php70
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php70$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php70:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.php56
    VirtualDocumentRoot /var/www/html/%2/%1

    <IfModule dir_module>
        DirectoryIndex index.html
    </IfModule>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^([^.]+).([^.]+).php56$ [NC]
    RewriteRule ^\/(.*\.php(\/.*)?)$ fcgi://php56:9000/var/www/html/%2/%1/$1 [P]
</VirtualHost>
